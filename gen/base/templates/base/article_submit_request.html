{% extends "base/base.html" %}

{% block title %}
Заявка на статью | {{ site_brand }}
{% endblock %}

{% block content %}
<section class="page-shell">
    <div class="page-header">
        <h1 class="page-title">Заявка на публикацию статьи</h1>
        <p class="page-subtitle">
            Заполните форму, прикрепите до 7 изображений и отправьте материал на модерацию.
        </p>
    </div>

    <form method="post" enctype="multipart/form-data" class="form-shell">
        {% csrf_token %}

        <div class="form-field">
            <label class="form-label" for="{{ form.title.id_for_label }}">{{ form.title.label }}</label>
            {{ form.title }}
            {{ form.title.errors }}
        </div>

        <div class="form-field">
            <label class="form-label" for="{{ form.summary.id_for_label }}">{{ form.summary.label }}</label>
            {{ form.summary }}
            {{ form.summary.errors }}
        </div>

        <div class="form-field">
            <label class="form-label" for="{{ form.content.id_for_label }}">{{ form.content.label }}</label>
            {{ form.content }}
            {{ form.content.errors }}
        </div>

        <div class="form-field">
            <label class="form-label" for="{{ form.images.id_for_label }}">{{ form.images.label }}</label>
            {{ form.images }}
            {{ form.images.errors }}
            <small class="text-muted">{{ form.images.help_text }}</small>
        </div>

        <div>
            <button type="submit" name="preview" value="1" class="btn-link">Предпросмотр</button>
            <button type="submit" class="btn-main">Отправить на модерацию</button>
        </div>
    </form>

    {% if preview_data %}
        <div class="quick-info" style="margin-top:18px;">
            <h3 style="margin-bottom:10px;">Предпросмотр</h3>
            <h4>{{ preview_data.title }}</h4>
            <p>{{ preview_data.summary }}</p>
            <div class="article-content">{{ preview_data.content|linebreaksbr }}</div>
        </div>
    {% endif %}
</section>
{% endblock %}
